<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø¨Ø§Ø²ÛŒ ØªØ¹Ø§Ù…Ù„ÛŒ: Ù…Ù‡Ø§Ø¬Ø±Øª Ùˆ Ù¾Ø±Ø§Ú©Ù†Ø´ Ø¬Ù…Ø¹ÛŒØª Ø§ÛŒØ±Ø§Ù†</title>
  <style>
    :root{
      --bg:#f7fbff;
      --primary:#1565c0;
      --accent:#ffb300;
      --good:#2e7d32;
      --bad:#c62828;
      --card:#ffffff;
      --text:#1f2937;
      --muted:#6b7280;
      --shadow:0 6px 20px rgba(0,0,0,.08);
      --radius:16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;background:var(--bg);color:var(--text);
      font-family: "Vazirmatn", "IRANSans", system-ui, sans-serif;
    }
    header{
      background:linear-gradient(135deg,var(--primary),#2a86e0);
      color:#fff;padding:20px 16px;text-align:center;
      position:sticky;top:0;z-index:5;
      box-shadow:0 3px 12px rgba(21,101,192,.35);
    }
    header h1{margin:8px 0 4px;font-size:22px}
    header p{margin:0;font-size:14px;opacity:.9}
    .container{max-width:980px;margin:0 auto;padding:16px}
    .stage{
      background:var(--card);border-radius:var(--radius);
      box-shadow:var(--shadow);padding:16px;margin:14px 0;
    }
    .stage h2{
      margin:0 0 8px;font-size:18px;color:var(--primary);
      display:flex;align-items:center;gap:8px;
    }
    .stage small{color:var(--muted)}
    .row{display:flex;flex-wrap:wrap;gap:12px}
    .col{flex:1 1 280px;min-width:260px}
    .card{
      background:#fff;border:1px solid #e5e7eb;border-radius:14px;padding:12px;
    }
    .pill{
      display:inline-block;background:#eef6ff;color:#0b5fb3;
      border:1px dashed #b6d7ff;border-radius:999px;padding:6px 10px;margin:6px 6px 0 0;font-size:14px
    }
    .btn{
      background:var(--primary);color:#fff;border:none;border-radius:12px;
      padding:10px 14px;cursor:pointer;font-size:15px;box-shadow:var(--shadow)
    }
    .btn.secondary{background:#e2e8f0;color:#0f172a}
    .btn.success{background:var(--good)}
    .btn.warn{background:var(--accent);color:#1a1a1a}
    .btn.danger{background:var(--bad)}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .toolbar{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .progress{
      display:flex;gap:8px;flex-wrap:wrap;margin:12px 0 0;
    }
    .chip{
      background:#fff;border:1px solid #e5e7eb;border-radius:999px;
      padding:6px 10px;font-size:13px;display:flex;align-items:center;gap:6px
    }
    .score{
      background:#fff;border-radius:14px;padding:10px 12px;box-shadow:var(--shadow);
      display:flex;gap:12px;align-items:center;justify-content:space-between;margin:12px 0
    }
    .score b{color:var(--primary)}
    .dropzone{
      border:2px dashed #9aa7b1;border-radius:14px;padding:12px;min-height:120px;background:#f9fafb
    }
    .draggable{
      display:inline-flex;align-items:center;gap:8px;
      background:#fff;border:1px solid #e5e7eb;border-radius:999px;
      padding:8px 12px;margin:6px;cursor:grab;box-shadow:var(--shadow);
      touch-action:none
    }
    .draggable:active{cursor:grabbing}
    .good{color:var(--good)}
    .bad{color:var(--bad)}
    .hint{background:#fff7e6;border:1px solid #ffd78a;color:#6b4f00;
      border-radius:12px;padding:8px 10px;font-size:13px;margin-top:8px}
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
    .tile{
      aspect-ratio:1/1;background:#eaf2ff;border-radius:12px;
      display:flex;align-items:center;justify-content:center;font-size:20px;
      cursor:pointer;user-select:none;box-shadow:var(--shadow)
    }
    .tile.open{background:#fff}
    .tile.matched{background:#e7f7ee;color:#2e7d32}
    .list{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
    .list button{padding:10px;border-radius:12px;border:1px solid #e5e7eb;background:#fff;cursor:pointer}
    .wheel{
      width:240px;height:240px;border-radius:50%;
      background:conic-gradient(#ffd166 0 60deg,#06d6a0 60deg 120deg,#118ab2 120deg 180deg,#ef476f 180deg 240deg,#8338ec 240deg 300deg,#ffb703 300deg 360deg);
      margin:0 auto;border:6px solid #fff;box-shadow:var(--shadow);position:relative
    }
    .wheel::after{
      content:"â–²";position:absolute;top:-24px;left:50%;transform:translateX(-50%);
      font-size:22px;color:#c62828;text-shadow:0 1px 1px #fff
    }
    .center{
      display:flex;align-items:center;justify-content:center;text-align:center
    }
    footer{
      margin:18px auto 26px;max-width:980px;padding:8px 12px;color:#334155;
      text-align:center;font-size:13px
    }
    .credit{font-weight:600}
    .print{display:none}
    @media print{
      header,.toolbar,.btn,.wheel{display:none}
      .print{display:block}
    }
    .badge{
      display:inline-flex;align-items:center;gap:6px;
      background:#eef2ff;color:#1e3a8a;border:1px solid #c7d2fe;border-radius:999px;
      padding:6px 10px;font-size:13px
    }
  </style>
</head>
<body>
  <header>
    <h1>Ø¨Ø§Ø²ÛŒ ØªØ¹Ø§Ù…Ù„ÛŒ: Ù…Ù‡Ø§Ø¬Ø±Øª Ùˆ Ù¾Ø±Ø§Ú©Ù†Ø´ Ø¬Ù…Ø¹ÛŒØª Ø§ÛŒØ±Ø§Ù†</h1>
    <p>ØªÙ…Ø±ÛŒÙ† Ø¹ÙˆØ§Ù…Ù„ ØªØ±Ú©/Ø¬Ø°Ø¨ Ù†Ø§Ø­ÛŒÙ‡ Ùˆ Ú†Ø±Ø§ Ø¨Ø±Ø®ÛŒ Ù†ÙˆØ§Ø­ÛŒ Ø§ÛŒØ±Ø§Ù† Ù¾Ø±Ø¬Ù…Ø¹ÛŒØª ÛŒØ§ Ú©Ù…â€ŒØ¬Ù…Ø¹ÛŒØªâ€ŒØ§Ù†Ø¯</p>
  </header>

  <div class="container">
    <div class="score" id="scoreBox">
      <div class="badge"><span>Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ ØªÙˆØµÛŒÙÛŒ:</span> <b id="descScore">â€”</b></div>
      <div class="progress">
        <span class="chip">Ù…Ø±Ø­Ù„Ù‡ 1: ØªØ¹Ø±ÛŒÙ</span>
        <span class="chip">Ù…Ø±Ø­Ù„Ù‡ 2: ØªØ±Ú©/Ø¬Ø°Ø¨</span>
        <span class="chip">Ù…Ø±Ø­Ù„Ù‡ 3: Ù¾Ø±Ø§Ú©Ù†Ø´ Ø¬Ù…Ø¹ÛŒØª</span>
        <span class="chip">Ù…Ø±Ø­Ù„Ù‡ 4: Ø­Ø§ÙØ¸Ù‡ ØªØµÙˆÛŒØ±ÛŒ</span>
        <span class="chip">Ù…Ø±Ø­Ù„Ù‡ 5: ÙˆØ§Ú˜Ù‡â€ŒØ³Ø§Ø²ÛŒ</span>
        <span class="chip">Ù…Ø±Ø­Ù„Ù‡ 6: Ú¯ÙØªâ€ŒÙˆÚ¯Ùˆ Ø¨Ø§ Ú¯Ø±Ø¯ÙˆÙ†Ù‡</span>
      </div>
      <div class="toolbar">
        <button class="btn secondary" id="resetBtn">Ø´Ø±ÙˆØ¹ Ø¯ÙˆØ¨Ø§Ø±Ù‡</button>
        <button class="btn warn" id="printBtn">Ú†Ø§Ù¾ Ú¯Ø²Ø§Ø±Ø´</button>
      </div>
    </div>

    <!-- Stage 1: ØªØ¹Ø±ÛŒÙ Ù…Ù‡Ø§Ø¬Ø±Øª -->
    <section class="stage" id="stage1">
      <h2>Ù…Ø±Ø­Ù„Ù‡ 1: ØªØ¹Ø±ÛŒÙ Ù…Ù‡Ø§Ø¬Ø±Øª <small>â€” ÛŒÚ© Ù¾Ø±Ø³Ø´ Ú©ÙˆØªØ§Ù‡</small></h2>
      <p>Ú©Ø¯Ø§Ù… Ú¯Ø²ÛŒÙ†Ù‡ ØªØ¹Ø±ÛŒÙ Â«Ù…Ù‡Ø§Ø¬Ø±ØªÂ» Ø±Ø§ Ø¨Ù‡ØªØ± Ø¨ÛŒØ§Ù† Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŸ</p>
      <div class="list" id="q1List">
        <button data-correct="false">Ø¬Ø§â€ŒØ¨Ù‡â€ŒØ¬Ø§ÛŒÛŒ ÙØµÙ„ÛŒ Ø¨Ø§Ø¯Ù‡Ø§ Ø¯Ø± Ú©ÙˆÙ‡Ø³ØªØ§Ù†</button>
        <button data-correct="true">Ø¬Ø§â€ŒØ¨Ù‡â€ŒØ¬Ø§ÛŒÛŒ Ø§ÙØ±Ø§Ø¯ Ø§Ø² Ù†Ø§Ø­ÛŒÙ‡â€ŒØ§ÛŒ Ø¨Ù‡ Ù†Ø§Ø­ÛŒÙ‡ Ø¯ÛŒÚ¯Ø± Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±ØŒ Ø§Ù…Ù†ÛŒØª ÛŒØ§ Ø²Ù†Ø¯Ú¯ÛŒ Ø¨Ù‡ØªØ±</button>
        <button data-correct="false">Ø§ÙØ²Ø§ÛŒØ´ Ø·Ø¨ÛŒØ¹ÛŒ Ø¬Ù…Ø¹ÛŒØª Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ ØªÙˆÙ„Ø¯</button>
        <button data-correct="false">Ø­Ø±Ú©Øª Ø­ÛŒÙˆØ§Ù†Ø§Øª ÙˆØ­Ø´ÛŒ Ø¯Ø± Ø²ÛŒØ³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§</button>
      </div>
      <div class="hint">Ø±Ø§Ù‡Ù†Ù…Ø§: Ø¨Ù‡ Ø¹Ù„Ù„ Ø§Ù†Ø³Ø§Ù†ÛŒ Ù…Ø§Ù†Ù†Ø¯ Ú©Ø§Ø±ØŒ Ø¢Ù…ÙˆØ²Ø´ØŒ Ø¯Ø±Ù…Ø§Ù† Ùˆ Ø§Ù…Ù†ÛŒØª ØªÙˆØ¬Ù‡ Ú©Ù†.</div>
    </section>

    <!-- Stage 2: Ø¹ÙˆØ§Ù…Ù„ ØªØ±Ú©/Ø¬Ø°Ø¨ -->
    <section class="stage" id="stage2">
      <h2>Ù…Ø±Ø­Ù„Ù‡ 2: Ø¹ÙˆØ§Ù…Ù„ ØªØ±Ú© Ùˆ Ø¬Ø°Ø¨ Ù†Ø§Ø­ÛŒÙ‡ <small>â€” Ú©Ø´ÛŒØ¯Ù† Ùˆ Ø±Ù‡Ø§ Ú©Ø±Ø¯Ù†</small></h2>
      <p>Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ù‡ Ø³ØªÙˆÙ† Ø¯Ø±Ø³Øª Ù…Ù†ØªÙ‚Ù„ Ú©Ù†: ØªØ±Ú© (Ø¯ÙØ¹â€ŒÚ©Ù†Ù†Ø¯Ù‡) ÛŒØ§ Ø¬Ø°Ø¨ (Ø¬Ø§Ø°Ø¨).</p>
      <div class="row">
        <div class="col">
          <div class="card">
            <h3 style="margin-top:0" class="bad">Ø³ØªÙˆÙ† ØªØ±Ú© Ù†Ø§Ø­ÛŒÙ‡</h3>
            <div class="dropzone" id="dropPush"></div>
          </div>
        </div>
        <div class="col">
          <div class="card">
            <h3 style="margin-top:0" class="good">Ø³ØªÙˆÙ† Ø¬Ø°Ø¨ Ù†Ø§Ø­ÛŒÙ‡</h3>
            <div class="dropzone" id="dropPull"></div>
          </div>
        </div>
      </div>
      <div id="dragItems" class="card" style="margin-top:12px">
        <div class="draggable" draggable="true" data-type="push">ğŸš± Ú©Ù…â€ŒØ¢Ø¨ÛŒ Ùˆ Ø®Ø´Ú©â€ŒØ³Ø§Ù„ÛŒ</div>
        <div class="draggable" draggable="true" data-type="push">âš”ï¸ Ø¬Ù†Ú¯ Ùˆ Ù†Ø§Ø§Ù…Ù†ÛŒ</div>
        <div class="draggable" draggable="true" data-type="push">ğŸšï¸ ØªØ®Ø±ÛŒØ¨ Ùˆ ÙØ±Ø³ÙˆØ¯Ú¯ÛŒ Ø³Ú©ÙˆÙ†ØªÚ¯Ø§Ù‡</div>
        <div class="draggable" draggable="true" data-type="pull">ğŸ¥ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø¨ÛŒÙ…Ø§Ø±Ø³ØªØ§Ù†</div>
        <div class="draggable" draggable="true" data-type="pull">ğŸ« Ù…Ø¯Ø±Ø³Ù‡ Ùˆ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡</div>
        <div class="draggable" draggable="true" data-type="pull">ğŸ­ ÙØ±ØµØªâ€ŒÙ‡Ø§ÛŒ Ø´ØºÙ„ÛŒ Ùˆ Ú©Ø§Ø±Ø®Ø§Ù†Ù‡</div>
        <div class="draggable" draggable="true" data-type="pull">ğŸš Ø­Ù…Ù„â€ŒÙˆÙ†Ù‚Ù„ Ùˆ Ø±Ø§Ù‡ Ù…Ù†Ø§Ø³Ø¨</div>
      </div>
    </section>

    <!-- Stage 3: Ù¾Ø±Ø§Ú©Ù†Ø´ Ø¬Ù…Ø¹ÛŒØª Ø§ÛŒØ±Ø§Ù† -->
    <section class="stage" id="stage3">
      <h2>Ù…Ø±Ø­Ù„Ù‡ 3: Ù¾Ø±Ø§Ú©Ù†Ø´ Ø¬Ù…Ø¹ÛŒØª Ø§ÛŒØ±Ø§Ù† <small>â€” Ø¯Ø±Ø³Øª/Ù†Ø§Ø¯Ø±Ø³Øª Ùˆ Ø¬ÙˆØ± Ú©Ø±Ø¯Ù†</small></h2>
      <p>Ø¨Ø§ ØªÙˆØ¬Ù‡ Ø¨Ù‡ Ø´Ø±Ø§ÛŒØ· Ø·Ø¨ÛŒØ¹ÛŒØŒ Ú©Ø¯Ø§Ù… Ù†ÙˆØ§Ø­ÛŒ Ù¾Ø±Ø¬Ù…Ø¹ÛŒØªâ€ŒØªØ± ÛŒØ§ Ú©Ù…â€ŒØ¬Ù…Ø¹ÛŒØªâ€ŒØªØ±Ù†Ø¯ØŸ</p>
      <div class="row">
        <div class="col card">
          <p><b>Ú¯Ø²Ø§Ø±Ù‡â€ŒÙ‡Ø§:</b></p>
          <div class="list" id="tfList">
            <button data-ans="true">Ù†ÙˆØ§Ø­ÛŒ Ø´Ù…Ø§Ù„ÛŒ Ùˆ Ú©ÙˆÙ‡Ù¾Ø§ÛŒÙ‡â€ŒØ§ÛŒ Ø§Ù„Ø¨Ø±Ø² Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ø¨Ø§Ø±Ù†Ø¯Ú¯ÛŒ Ùˆ Ø®Ø§Ú© Ø­Ø§ØµÙ„â€ŒØ®ÛŒØ²ØŒ Ù¾Ø±Ø¬Ù…Ø¹ÛŒØªâ€ŒØªØ±Ù†Ø¯.</button>
            <button data-ans="true">Ú©ÙˆÙ‡Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ø²Ø§Ú¯Ø±Ø³ Ø¯Ø± ØºØ±Ø¨ Ø¨Ù‡ Ø¹Ù„Øª Ø¨Ø§Ø±Ù†Ø¯Ú¯ÛŒ Ùˆ Ù¾ÙˆØ´Ø´ Ú¯ÛŒØ§Ù‡ÛŒØŒ Ø¬Ù…Ø¹ÛŒØª Ø¨ÛŒØ´ØªØ±ÛŒ Ø¯Ø§Ø±Ù†Ø¯.</button>
            <button data-ans="false">Ø¯Ø´Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø±Ú©Ø²ÛŒ Ø®Ø´Ú© (Ú©ÙˆÛŒÙ€Ø± Ùˆ Ù„ÙˆØª) Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ú©Ù…â€ŒØ¢Ø¨ÛŒØŒ Ø¨Ø³ÛŒØ§Ø± Ù¾Ø±Ø¬Ù…Ø¹ÛŒØªâ€ŒØ§Ù†Ø¯.</button>
            <button data-ans="true">Ù†Ø§Ø­ÛŒÙ‡ Ø¯Ø§Ø®Ù„ ÙÙ„Ø§Øª Ø§ÛŒØ±Ø§Ù† Ø¨Ù‡ Ø¹Ù„Øª Ø®Ø´Ú©Ù€ÛŒ Ùˆ Ú©Ù…â€ŒØ¢Ø¨ÛŒØŒ Ø¬Ù…Ø¹ÛŒØª Ú©Ù…ÛŒ Ø¯Ø§Ø±Ø¯.</button>
          </div>
        </div>
        <div class="col card">
          <p><b>Ø¬ÙˆØ± Ú©Ø±Ø¯Ù† Ù†Ø§Ø­ÛŒÙ‡ Ùˆ ÙˆÛŒÚ˜Ú¯ÛŒ:</b></p>
          <div class="grid" id="matchGrid">
            <!-- Areas -->
            <button class="pill" data-key="north">Ø´Ù…Ø§Ù„ Ø§ÛŒØ±Ø§Ù† / Ø§Ù„Ø¨Ø±Ø²</button>
            <button class="pill" data-key="zagros">ØºØ±Ø¨ Ø§ÛŒØ±Ø§Ù† / Ø²Ø§Ú¯Ø±Ø³</button>
            <button class="pill" data-key="central">Ø¯Ø§Ø®Ù„ ÙÙ„Ø§Øª / Ú©ÙˆÛŒØ±</button>
            <button class="pill" data-key="coast">Ø³ÙˆØ§Ø­Ù„ Ø¬Ù†ÙˆØ¨ÛŒ</button>
            <!-- Traits -->
            <button class="pill" data-key="fertile">Ø®Ø§Ú© Ø­Ø§ØµÙ„â€ŒØ®ÛŒØ² Ùˆ Ø¨Ø§Ø±Ù†Ø¯Ú¯ÛŒ Ù…Ù†Ø§Ø³Ø¨</button>
            <button class="pill" data-key="dry">Ø®Ø´Ú©ÛŒ Ùˆ Ú©Ù…â€ŒØ¢Ø¨ÛŒ</button>
            <button class="pill" data-key="jobs">Ù…Ø±Ø§Ú©Ø² Ø§Ù‚ØªØµØ§Ø¯ÛŒ Ùˆ Ø­Ù…Ù„â€ŒÙˆÙ†Ù‚Ù„</button>
            <button class="pill" data-key="forest">Ù¾ÙˆØ´Ø´ Ú¯ÛŒØ§Ù‡ÛŒ/Ø¬Ù†Ú¯Ù„â€ŒÙ‡Ø§ÛŒ Ø§Ù†Ø¨ÙˆÙ‡</button>
          </div>
          <div class="hint">Ù‡Ø± Ø¨Ø§Ø± Ø¯Ùˆ Ú¯Ø²ÛŒÙ†Ù‡ Ù‡Ù…â€ŒÙ…Ø¹Ù†ÛŒ Ø±Ø§ Ù¾Ø´Øªâ€ŒØ³Ø±Ù‡Ù… Ù„Ù…Ø³ Ú©Ù† ØªØ§ ÛŒÚ© Ø¬ÙØª Ø«Ø¨Øª Ø´ÙˆØ¯.</div>
        </div>
      </div>
    </section>

    <!-- Stage 4: Ø¨Ø§Ø²ÛŒ Ø­Ø§ÙØ¸Ù‡ ØªØµÙˆÛŒØ±ÛŒ -->
    <section class="stage" id="stage4">
      <h2>Ù…Ø±Ø­Ù„Ù‡ 4: Ø­Ø§ÙØ¸Ù‡ ØªØµÙˆÛŒØ±ÛŒ Ù…Ù‡Ø§Ø¬Ø±Øª <small>â€” Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø¬ÙØªâ€ŒÙ‡Ø§</small></h2>
      <p>Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Â«ØªØ±Ú©Â» Ø±Ø§ Ø¨Ø§ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Â«Ø¬Ø°Ø¨Â» Ø¬ÙØª Ú©Ù†.</p>
      <div class="grid" id="memoryGrid"></div>
      <div class="hint">Ø¯Ùˆ Ú©Ø§Ø±Øª Ù‡Ù…â€ŒØ±Ø§Ø³ØªØ§ Ø±Ø§ Ú©Ø´Ù Ú©Ù†: Ù…Ø«Ù„Ø§Ù‹ âš”ï¸ Ø¬Ù†Ú¯ â†”ï¸ ğŸ¥ Ø®Ø¯Ù…Ø§Øª Ùˆ Ø§Ù…Ù†ÛŒØª.</div>
    </section>

    <!-- Stage 5: ÙˆØ§Ú˜Ù‡â€ŒØ³Ø§Ø²ÛŒ (Ø­Ø±ÙˆÙ Ø¯Ø±Ù‡Ù…) -->
    <section class="stage" id="stage5">
      <h2>Ù…Ø±Ø­Ù„Ù‡ 5: ÙˆØ§Ú˜Ù‡â€ŒØ³Ø§Ø²ÛŒ <small>â€” Ø­Ø±ÙˆÙ Ø±Ø§ Ù…Ø±ØªØ¨ Ú©Ù†</small></h2>
      <p>Ø­Ø±ÙˆÙ Ø±Ø§ Ù…Ø±ØªØ¨ Ú©Ù† ØªØ§ ÙˆØ§Ú˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø±Ø³ Ø³Ø§Ø®ØªÙ‡ Ø´ÙˆØ¯.</p>
      <div class="card">
        <p><b>ÙˆØ§Ú˜Ù‡â€ŒÙ‡Ø§:</b></p>
        <div class="row" id="scrambleList"></div>
      </div>
    </section>

    <!-- Stage 6: Ú¯Ø±Ø¯ÙˆÙ†Ù‡ Ú¯ÙØªâ€ŒÙˆÚ¯Ùˆ Ú©Ù„Ø§Ø³ÛŒ -->
    <section class="stage" id="stage6">
      <h2>Ù…Ø±Ø­Ù„Ù‡ 6: Ú¯ÙØªâ€ŒÙˆÚ¯Ùˆ Ø¨Ø§ Ú¯Ø±Ø¯ÙˆÙ†Ù‡ <small>â€” Ù¾Ø±Ø³Ø´â€ŒÙ‡Ø§ÛŒ Ú©Ù„Ø§Ø³ÛŒ</small></h2>
      <p>Ú¯Ø±Ø¯ÙˆÙ†Ù‡ Ø±Ø§ Ø¨Ú†Ø±Ø®Ø§Ù† Ùˆ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù¾Ø±Ø³Ø´Ù Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡ Ú¯ÙØªÚ¯Ùˆ Ú©Ù†.</p>
      <div class="wheel" id="wheel"></div>
      <div class="center" style="margin:12px 0">
        <button class="btn" id="spinBtn">Ú†Ø±Ø®Ø´ Ú¯Ø±Ø¯ÙˆÙ†Ù‡</button>
      </div>
      <div class="card center">
        <p id="promptBox"><b>Ù¾Ø±Ø³Ø´ Ø§Ù†ØªØ®Ø§Ø¨ÛŒ:</b> Ø±ÙˆÛŒ Â«Ú†Ø±Ø®Ø´ Ú¯Ø±Ø¯ÙˆÙ†Ù‡Â» Ø¨Ø²Ù†.</p>
      </div>
    </section>

    <!-- Report -->
    <section class="stage" id="report">
      <h2>Ú¯Ø²Ø§Ø±Ø´ Ù¾Ø§ÛŒØ§Ù†</h2>
      <p class="print">Ø§ÛŒÙ† ØµÙØ­Ù‡ Ø¨Ø±Ø§ÛŒ Ú†Ø§Ù¾ Ø¨Ù‡ÛŒÙ†Ù‡ Ø´Ø¯Ù‡ Ø§Ø³Øª. Ø¯Ø± Ú©Ù„Ø§Ø³ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ù†ØªÛŒØ¬Ù‡ ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ Ø±Ø§ Ù…Ø±ÙˆØ± Ú©Ù†ÛŒØ¯.</p>
      <div id="reportBody" class="card"></div>
    </section>
  </div>

  <footer>
    <span class="credit">Ø·Ø±Ø§Ø­: Ø¨Ø¯Ø±</span> â€” Ù†Ø³Ø®Ù‡ Ú©Ù„Ø§Ø³ÛŒØŒ Ù…ÙˆØ¨Ø§ÛŒÙ„â€ŒÙ¾Ø³Ù†Ø¯ Ùˆ Ù‚Ø§Ø¨Ù„ Ú†Ø§Ù¾.
  </footer>

  <audio id="ding" preload="auto">
    <source src="data:audio/mp3;base64,//uQZAAAAAAAAAAAAAAAAAAAA" type="audio/mp3">
  </audio>

  <script>
    // Internal score (for descriptive evaluation only)
    let SCORE = 0;
    const descEl = document.getElementById('descScore');

    function addScore(v=1){ SCORE += v; updateDescriptiveBadge(); }
    function updateDescriptiveBadge(){
      descEl.textContent = getDescriptiveScore(SCORE);
      const label = descEl.textContent;
      // Color hint for quick visual feedback
      const box = document.getElementById('scoreBox');
      if(label.includes('Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ¨')) box.style.border = '2px solid #2e7d32';
      else if(label.includes('Ø®ÙˆØ¨')) box.style.border = '2px solid #10b981';
      else if(label.includes('Ù‚Ø§Ø¨Ù„ Ù‚Ø¨ÙˆÙ„')) box.style.border = '2px solid #f59e0b';
      else box.style.border = '2px solid #ef4444';
      box.style.borderRadius = '14px';
    }
    function getDescriptiveScore(score){
      if(score >= 18) return "Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ¨";
      if(score >= 13) return "Ø®ÙˆØ¨";
      if(score >= 8) return "Ù‚Ø§Ø¨Ù„ Ù‚Ø¨ÙˆÙ„";
      return "Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ„Ø§Ø´ Ø¨ÛŒØ´ØªØ±";
    }
    updateDescriptiveBadge();

    // Reset & Print
    document.getElementById('resetBtn').addEventListener('click', ()=>location.reload());
    document.getElementById('printBtn').addEventListener('click', ()=>window.print());

    // Stage 1: single-choice
    document.querySelectorAll('#q1List button').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const ok = btn.dataset.correct === "true";
        btn.style.borderColor = ok ? '#2e7d32' : '#c62828';
        btn.style.background = ok ? '#e7f7ee' : '#fde7e7';
        if(ok){ addScore(2); }
        document.querySelectorAll('#q1List button').forEach(b=>b.disabled=true);
      });
    });

    // Stage 2: drag & drop
    const dropPush = document.getElementById('dropPush');
    const dropPull = document.getElementById('dropPull');
    const dragItems = document.querySelectorAll('#dragItems .draggable');

    dragItems.forEach(el=>{
      el.addEventListener('dragstart',e=>{
        e.dataTransfer.setData('text/plain', el.textContent);
        e.dataTransfer.setData('type', el.dataset.type);
        e.dataTransfer.effectAllowed = 'move';
      });
    });

    [dropPush, dropPull].forEach(zone=>{
      zone.addEventListener('dragover',e=>e.preventDefault());
      zone.addEventListener('drop',e=>{
        e.preventDefault();
        const label = e.dataTransfer.getData('text/plain');
        const type = e.dataTransfer.getData('type');
        const correct = (zone===dropPush && type==='push') || (zone===dropPull && type==='pull');
        const pill = document.createElement('div');
        pill.className = 'pill';
        pill.textContent = label;
        zone.appendChild(pill);
        addScore(correct?1:0);
      });
    });

    // Stage 3: True/False
    document.querySelectorAll('#tfList button').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const ok = btn.dataset.ans === "true";
        btn.style.borderColor = ok ? '#2e7d32' : '#c62828';
        btn.style.background = ok ? '#e7f7ee' : '#fde7e7';
        addScore(ok?1:0);
        btn.disabled = true;
      });
    });

    // Stage 3: matching pairs (tap two pills)
    const matchPairs = {
      north: ['fertile','forest'],
      zagros: ['fertile'],
      central: ['dry'],
      coast: ['jobs']
    };
    let matchPick = null;
    document.querySelectorAll('#matchGrid .pill').forEach(p=>{
      p.addEventListener('click',()=>{
        if(!matchPick){ matchPick = p; p.style.borderColor='#0b5fb3'; return; }
        const a = matchPick.dataset.key, b = p.dataset.key;
        const isMatch =
          (matchPairs[a] && matchPairs[a].includes(b)) ||
          (matchPairs[b] && matchPairs[b].includes(a));
        [matchPick,p].forEach(el=>{
          el.style.borderColor = isMatch ? '#2e7d32' : '#c62828';
          el.style.background = isMatch ? '#e7f7ee' : '#fde7e7';
        });
        addScore(isMatch?1:0);
        matchPick = null;
      });
    });

    // Stage 4: Memory Game
    const memoryData = [
      {emoji:'âš”ï¸', label:'Ø¬Ù†Ú¯/Ù†Ø§Ø§Ù…Ù†ÛŒ', type:'push'},
      {emoji:'ğŸš±', label:'Ú©Ù…â€ŒØ¢Ø¨ÛŒ', type:'push'},
      {emoji:'ğŸšï¸', label:'ØªØ®Ø±ÛŒØ¨ Ù…Ø³Ú©Ù†', type:'push'},
      {emoji:'ğŸ¥', label:'Ø®Ø¯Ù…Ø§Øª Ø¯Ø±Ù…Ø§Ù†ÛŒ', type:'pull'},
      {emoji:'ğŸ«', label:'Ø¢Ù…ÙˆØ²Ø´', type:'pull'},
      {emoji:'ğŸ­', label:'Ø´ØºÙ„/ØµÙ†Ø¹Øª', type:'pull'},
      {emoji:'ğŸš', label:'Ø­Ù…Ù„â€ŒÙˆÙ†Ù‚Ù„', type:'pull'},
      {emoji:'ğŸ¡', label:'Ù…Ø³Ú©Ù† Ù…Ù†Ø§Ø³Ø¨', type:'pull'}
    ];
    const pairs = [
      ['âš”ï¸','ğŸ¥'],
      ['ğŸš±','ğŸš'],
      ['ğŸšï¸','ğŸ¡'],
      ['ğŸ«','ğŸ­'],
    ];
    const tiles = [];
    pairs.flat().forEach(emoji=>{
      const item = memoryData.find(x=>x.emoji===emoji);
      tiles.push({emoji:item.emoji,label:item.label,type:item.type,open:false,matched:false});
    });
    tiles.sort(()=>Math.random()-0.5);
    const grid = document.getElementById('memoryGrid');
    tiles.forEach((t,i)=>{
      const div = document.createElement('div');
      div.className='tile';
      div.textContent='â“';
      div.addEventListener('click',()=>{
        if(t.matched || t.open) return;
        t.open = true; div.classList.add('open'); div.textContent = `${t.emoji} ${t.label}`;
        const opened = tiles.filter(x=>x.open && !x.matched);
        if(opened.length===2){
          const combo = [opened[0].emoji, opened[1].emoji];
          const ok = pairs.some(pr => pr.every(e=>combo.includes(e)));
          setTimeout(()=>{
            if(ok){
              opened.forEach(x=>{ x.matched=true; x.open=false; });
              document.querySelectorAll('#memoryGrid .tile').forEach((el,idx)=>{
                if(tiles[idx].matched){ el.classList.add('matched'); el.textContent = tiles[idx].emoji; }
              });
              addScore(2);
            }else{
              opened.forEach(x=>{ x.open=false; });
              document.querySelectorAll('#memoryGrid .tile').forEach((el,idx)=>{
                if(!tiles[idx].matched){ el.classList.remove('open'); el.textContent='â“'; }
              });
            }
          },700);
        }
      });
      grid.appendChild(div);
    });

    // Stage 5: Scramble words
    const words = [
      {target:'Ù…Ù‡Ø§Ø¬Ø±Øª', letters:'Ù‡Ø¬Ù…Ø§Ø±â€ŒØª'},
      {target:'Ø¬Ù…Ø¹ÛŒØª', letters:'Ø¬ÛŒÙ…Ø¹Øª'},
      {target:'Ù†Ø§Ø­ÛŒÙ‡', letters:'ÛŒÙ‡Ù†Ø¹Ø§'},
      {target:'Ø®Ø´Ú©ÛŒ', letters:'Ø®Ú©Ø´ÛŒ'}
    ];
    const scrambleBox = document.getElementById('scrambleList');
    words.forEach((w,idx)=>{
      const wrap = document.createElement('div');
      wrap.className='card';
      const title = document.createElement('p');
      title.innerHTML = `<b>Ø­Ø±ÙˆÙ Ø¯Ø±Ù‡Ù… ${idx+1}:</b> ${w.letters}`;
      const input = document.createElement('input');
      input.style.width='100%'; input.style.padding='10px'; input.style.border='1px solid #e5e7eb';
      input.style.borderRadius='10px'; input.placeholder='ÙˆØ§Ú˜Ù‡ Ø¯Ø±Ø³Øª Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³';
      const check = document.createElement('button');
      check.className='btn'; check.textContent='Ø¨Ø±Ø±Ø³ÛŒ';
      const status = document.createElement('div'); status.className='hint'; status.style.display='none';
      check.addEventListener('click',()=>{
        const ok = input.value.trim() === w.target;
        status.style.display='block';
        status.textContent = ok ? 'Ø¢ÙØ±ÛŒÙ†! Ø¯Ø±Ø³Øª Ù†ÙˆØ´ØªÛŒ.' : 'Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†.';
        status.style.background = ok ? '#e7f7ee' : '#fff7e6';
        status.style.borderColor = ok ? '#2e7d32' : '#ffd78a';
        addScore(ok?1:0);
        if(ok){ input.disabled=true; check.disabled=true; }
      });
      wrap.appendChild(title); wrap.appendChild(input); wrap.appendChild(check); wrap.appendChild(status);
      scrambleBox.appendChild(wrap);
    });

    // Stage 6: Wheel of prompts
    const prompts = [
      'Ø§Ú¯Ø± Ú©Ø³ÛŒ Ø¯Ø± Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡â€ŒØ§Øª Ù…Ù‡Ø§Ø¬Ø±Øª Ú©Ø±Ø¯Ù‡ØŒ Ù…Ù‡Ù…â€ŒØªØ±ÛŒÙ† Ø¹Ù„Øª Ú†Ù‡ Ø¨ÙˆØ¯Ù‡ Ø§Ø³ØªØŸ',
      'Ø³Ù‡ Ø¹Ø§Ù…Ù„ Â«Ø¬Ø°Ø¨Â» Ú©Ù‡ Ø¨Ø±Ø§ÛŒ ØªÙˆ Ù…Ù‡Ù…â€ŒØ§Ù†Ø¯ Ù†Ø§Ù… Ø¨Ø¨Ø± Ùˆ Ú†Ø±Ø§.',
      'Ú†Ù‡ Ø±Ø§Ù‡Ú©Ø§Ø±Ù‡Ø§ÛŒÛŒ Ù…Ù‡Ø§Ø¬Ø±Øª Ø§Ø² Ù†ÙˆØ§Ø­ÛŒ Ø®Ø´Ú© Ø±Ø§ Ú©Ø§Ù‡Ø´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ØŸ',
      'Ú†Ø±Ø§ Ù†ÙˆØ§Ø­ÛŒ Ø´Ù…Ø§Ù„ÛŒ Ø§ÛŒØ±Ø§Ù† Ù¾Ø±Ø¬Ù…Ø¹ÛŒØªâ€ŒØªØ±Ù†Ø¯ØŸ Ù…Ø«Ø§Ù„ Ø¨Ø²Ù†.',
      'ØªÙØ§ÙˆØª Â«ØªØ±Ú©Â» Ùˆ Â«Ø¬Ø°Ø¨Â» Ø±Ø§ Ø¨Ø§ Ù†Ù…ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø­Ù„ÛŒ ØªÙˆØ¶ÛŒØ­ Ø¨Ø¯Ù‡.',
      'ÛŒÚ© ØªØ¬Ø±Ø¨Ù‡ ÛŒØ§ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ù‡Ø§Ø¬Ø±Øª Ø¯Ø± Ø±ÙˆØ³ØªØ§/Ø´Ù‡Ø± Ø®ÙˆØ¯Øª Ø¨Ú¯Ùˆ.'
    ];
    const wheel = document.getElementById('wheel');
    const promptBox = document.getElementById('promptBox');
    document.getElementById('spinBtn').addEventListener('click',()=>{
      wheel.style.transition='transform 1.2s cubic-bezier(.2,.8,.2,1)';
      const deg = 360*3 + Math.floor(Math.random()*360);
      wheel.style.transform=`rotate(${deg}deg)`;
      setTimeout(()=>{
        const pick = prompts[Math.floor(Math.random()*prompts.length)];
        promptBox.innerHTML = `<b>Ù¾Ø±Ø³Ø´ Ø§Ù†ØªØ®Ø§Ø¨ÛŒ:</b> ${pick}`;
      },1200);
    });

    // Report
    function buildReport(){
      const body = document.getElementById('reportBody');
      body.innerHTML = `
        <p><b>Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ù†Ù‡Ø§ÛŒÛŒ:</b> ${getDescriptiveScore(SCORE)}</p>
        <ul>
          <li><b>ØªØ¹Ø±ÛŒÙ Ù…Ù‡Ø§Ø¬Ø±Øª:</b> Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯.</li>
          <li><b>ØªØ±Ú©/Ø¬Ø°Ø¨:</b> Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø´Ø¯Ù†Ø¯.</li>
          <li><b>Ù¾Ø±Ø§Ú©Ù†Ø´ Ø¬Ù…Ø¹ÛŒØª:</b> Ú¯Ø²Ø§Ø±Ù‡â€ŒÙ‡Ø§ Ùˆ Ø¬ÙˆØ±Ø³Ø§Ø²ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ø´Ø¯.</li>
          <li><b>Ø­Ø§ÙØ¸Ù‡ ØªØµÙˆÛŒØ±ÛŒ:</b> Ø¬ÙØªâ€ŒÙ‡Ø§ Ú©Ø´Ù Ø´Ø¯.</li>
          <li><b>ÙˆØ§Ú˜Ù‡â€ŒØ³Ø§Ø²ÛŒ:</b> Ø­Ø±ÙˆÙ Ø¯Ø±Ù‡Ù… ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯.</li>
          <li><b>Ú¯Ø±Ø¯ÙˆÙ†Ù‡ Ú¯ÙØªâ€ŒÙˆÚ¯Ùˆ:</b> Ù¾Ø±Ø³Ø´ Ú©Ù„Ø§Ø³ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯.</li>
        </ul>
        <blockquote>Ù†Ú©ØªÙ‡: Â«ØªØ±Ú©Â» ÛŒØ¹Ù†ÛŒ Ø¹ÙˆØ§Ù…Ù„ Ø¯ÙØ¹â€ŒÚ©Ù†Ù†Ø¯Ù‡ (Ú©Ù…â€ŒØ¢Ø¨ÛŒØŒ Ù†Ø§Ø§Ù…Ù†ÛŒØŒ ØªØ®Ø±ÛŒØ¨). Â«Ø¬Ø°Ø¨Â» ÛŒØ¹Ù†ÛŒ Ø¬Ø§Ø°Ø¨Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ø§Ø­ÛŒÙ‡ (Ø®Ø¯Ù…Ø§ØªØŒ Ø¢Ù…ÙˆØ²Ø´ØŒ Ø´ØºÙ„ØŒ Ø­Ù…Ù„â€ŒÙˆÙ†Ù‚Ù„).</blockquote>
      `;
    }
    setInterval(buildReport, 1200);
  </script>
</body>
</html>
